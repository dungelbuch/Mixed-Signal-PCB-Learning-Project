# DAC & Analog Circuitry

![DAC7563](/notes/img/dac_circuitry.png)

## Digital-to-Analog Converter
The DAC used in this design is the DAC7563 from Texas Instruments, a 12-bit digital-to-analog converter with an internal 2.5V reference voltage. It operates within a 2.7V to 5.5V power supply range, making it fully compatible with the 3.3V digital power supply used in this design.

### Power Pins
To utilize the internal reference voltage, the VREF pin must be connected to ground through a capacitor of at least 150nF, as specified in the
[datasheet](/datasheet/dac7563.pdf). In this design, a 1µF capacitor is used for additional stability. The AVDD pin is connected to the 3.3V
digital power supply, ensuring proper operation while preventing digital signals from leaking into the analog section. To filter out noise, a 
100nF and a 10µF bypass capacitor are placed on the power supply line.

### SPI Serial Interface  
All digital pins of the DAC are connected to the MCU's SPI interface:  

- **DIN** → **SPI2_MOSI**  
- **SCLK** → **SPI2_SCK**  
- **NSYNC** → **SPI2_NSS**  
- **NCLR** and **NLDAC** → Connected to corresponding MCU pins  

Additionally, a 0Ω resistor is placed between the clock lines to improve signal integrity and reduce signal reflection, which is particularly
useful for high-speed SPI communication.

### DAC Output
Since we are only using channel A of the DAC, the channel B output is pulled to ground with a 10kΩ resistor, this helps to reduce noise. Output A 
is fed into the same 3rd-order Butterworth filter used in the ADC's analog front-end. This filter is will reduce the switching noise generated by
the DAC, ensuring a clean analog output signal. 

### BNC Connector
The DAC output is connected to a BNC connector, allowing for easy connection to external devices. A 49.9Ω resistor is placed after the op-amp to
increase the output impedance, since the op-a,p has a low output impedance. This resistor helps to prevent signal reflections and improve signal
integrity when connected to external devices. And finally a TVS diode is placed for ESD protection.